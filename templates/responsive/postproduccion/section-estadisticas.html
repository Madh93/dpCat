{% extends "postproduccion/base-2-1.html" %}

{% block page-title %}Videoteca{% endblock %}
{% block section-class %} {% endblock %}
{% block section-title %}<h1>Videoteca</h1>{% endblock %}

{% block section-content %} 
{% if stats.0.1 %}
    <div class="box box-solid box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Estad&iacute;sticas</h3>
        </div>
        <div class="box-body">
            <table class="table table-condensed">
                <thead>
                    <th>Propiedad</th>
                    <th>Informaci&oacute;n</th>
                    <th>Tiempo de grabaci&oacute;n</th>
                </thead>
                <tbody>
                    {% for element in stats %}
                        <tr>
                            <td>{{ element.0 }}</td>
                            <td>{{ element.1 }}</td>
                            <td>{{ element.2 }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% else %}
    <div class="alert alert-info alert-dismissible">
        <h4>
            <i class="icon fa fa-info"></i>
            Información
        </h4>
        No hay estad&iacute;sticas con los criterios de filtrado.
    </div>
{% endif %}
{% endblock %}

{% block section-widget %}
    <div class="box box-solid box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Opciones de la videoteca</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
        </div>
        <div class="box-body">
            <table class="table table-condensed">
                <tbody>
                    <tr>
                        <td>
                            <a type="button" class="btn btn-block btn-default btn-sm" href="{% url 'videoteca' %}">
                                <i class="icon fa fa-video-camera"></i>
                                Producciones
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a type="button" class="btn btn-block btn-default btn-sm" href="{% url 'colecciones' %}">
                                <i class="icon fa fa-folder"></i>
                                Colecciones
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <a type="button" class="btn btn-block btn-default btn-sm" href="{% url 'estadisticas' %}">
                                <i class="icon fa fa-area-chart"></i>
                                Estad&iacute;sticas
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="box box-solid box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Personalizar resultados</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
        </div>
        <form method="GET">
            <div class="box-body">
                <div class="form-group">
                    <label>Intervalo de tiempo:</label>
                    <div class="input-group date">
                        <div class="input-group-addon">Inicio
                            <i class="fa fa-calendar"></i>
                        </div>
                        <input type="text" class="form-control pull-right" id="from" name="f_ini" value="{{ request.GET.f_ini }}">
                        <div class="input-group-addon">Fin
                            <i class="fa fa-calendar"></i>
                        </div>
                        <input type="text" class="form-control pull-right" id="to" name="f_fin" value="{{ request.GET.f_fin }}">
                    </div>
                </div>
                <a class="btn btn-default" href="{% url 'estadisticas' %}">Reiniciar</a>
                <input class="btn btn-primary pull-right" type="submit" value="Filtrar" />
            </div>
        </form>
    </div>

    <div class="box box-solid box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Acciones disponibles</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
        </div>
        <div class="box-body">
            <a type="button" class="btn btn-block btn-default btn-sm" onclick="imprimir('#left')">
                <i class="icon fa fa-print"></i>
                    Imprimir
            </a>
        </div>
    </div>

    <div class="box box-solid box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Informaci&oacute;n de inter&eacute;s</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
        </div>
        <div class="box-body">
            <table class="table table-condensed">
                <tbody>
                    <tr>
                        <td><i class="fa fa-fw fa-info" style="font-size: 150%;"></i></td>
                        <td>Mostrar informaci&oacute;n acerca de las producciones realizadas.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block page-script %}
<script type="text/javascript">
function imprimir(data) {
    // Escribir información
    var mywindow = window.open('', 'dpCat', 'height=400,width=600');
    mywindow.document.write('<html><head><title>dpCat Estad&iacute;sticas</title>');
    mywindow.document.write('<link rel="stylesheet" href="/static/css/bootstrap.min.css" />');
    mywindow.document.write('</head><body>');
    mywindow.document.write($(data).html());
    mywindow.document.write('</body></html>');

    mywindow.document.close(); // IE >= 10
    mywindow.focus(); // IE >= 10

    // Imprimir
    mywindow.print();
    mywindow.close();

    return true;
}
</script>
{% endblock %}
